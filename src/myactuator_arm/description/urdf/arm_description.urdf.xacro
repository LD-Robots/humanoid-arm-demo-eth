<?xml version="1.0"?>
<robot xmlns:xacro="http://www.ros.org/wiki/xacro" name="myactuator_arm">
  <xacro:arg name="pkg_share" default=""/>

  <!-- Include the original robot structure from robot_arm/robot.urdf -->
  <!-- We'll redefine with proper mesh paths and add ros2_control -->

  <!-- Base link (table/stand) -->
  <link name="base_link">
    <inertial>
      <origin xyz="0.15231 0.00126822 -0.0733771" rpy="0 0 0"/>
      <mass value="12.7824"/>
      <inertia ixx="0.319682" ixy="2.7236e-08" ixz="0.0107613" iyy="0.0695316" iyz="1.98209e-07" izz="0.343485"/>
    </inertial>
    <visual>
      <origin xyz="0.171858 0.00126819 -0.0923205" rpy="-3.14159 2.84025e-16 -1.25251e-16"/>
      <geometry>
        <mesh filename="package://myactuator_arm/description/meshes/table.stl"/>
      </geometry>
      <material name="blue">
        <color rgba="0.615686 0.811765 0.929412 1"/>
      </material>
    </visual>
    <collision>
      <origin xyz="0.171858 0.00126819 -0.0923205" rpy="-3.14159 2.84025e-16 -1.25251e-16"/>
      <geometry>
        <mesh filename="package://myactuator_arm/description/meshes/table.stl"/>
      </geometry>
    </collision>
    <!-- Support cylinder 1 (left) -->
    <visual>
      <origin xyz="0.13 0.24 -0.47" rpy="0 0 0"/>
      <geometry>
        <cylinder radius="0.02" length="0.75"/>
      </geometry>
      <material name="blue"/>
    </visual>
    <collision>
      <origin xyz="0.13 0.24 -0.47" rpy="0 0 0"/>
      <geometry>
        <cylinder radius="0.02" length="0.75"/>
      </geometry>
    </collision>
    <!-- Support cylinder 2 (right) -->
    <visual>
      <origin xyz="0.13 -0.24 -0.47" rpy="0 0 0"/>
      <geometry>
        <cylinder radius="0.02" length="0.75"/>
      </geometry>
      <material name="blue"/>
    </visual>
    <collision>
      <origin xyz="0.13 -0.24 -0.47" rpy="0 0 0"/>
      <geometry>
        <cylinder radius="0.02" length="0.75"/>
      </geometry>
    </collision>
    <visual>
      <origin xyz="0.0868579 0.00126819 6.80296e-06" rpy="0 0 1.5708"/>
      <geometry>
        <mesh filename="package://myactuator_arm/description/meshes/menghina_x6.stl"/>
      </geometry>
      <material name="dark_blue">
        <color rgba="0.32549 0.529412 0.752941 1"/>
      </material>
    </visual>
    <collision>
      <origin xyz="0.0868579 0.00126819 6.80296e-06" rpy="0 0 1.5708"/>
      <geometry>
        <mesh filename="package://myactuator_arm/description/meshes/menghina_x6.stl"/>
      </geometry>
    </collision>
    <visual>
      <origin xyz="0.141358 0.00126819 6.80296e-06" rpy="0 -1.5708 0"/>
      <geometry>
        <mesh filename="package://myactuator_arm/description/meshes/stator_x6_p20_60.stl"/>
      </geometry>
      <material name="gold">
        <color rgba="0.960784 0.835294 0.470588 1"/>
      </material>
    </visual>
    <collision>
      <origin xyz="0.141358 0.00126819 6.80296e-06" rpy="0 -1.5708 0"/>
      <geometry>
        <mesh filename="package://myactuator_arm/description/meshes/stator_x6_p20_60.stl"/>
      </geometry>
    </collision>
  </link>

  <!-- Link 1: Shoulder (pitch rotation) -->
  <link name="shoulder_link">
    <inertial>
      <origin xyz="-0.00509657 -9.94177e-07 -0.0751786" rpy="0 0 0"/>
      <mass value="2.97837"/>
      <inertia ixx="0.00348255" ixy="-3.74291e-08" ixz="2.44885e-05" iyy="0.00306396" iyz="-6.6893e-08" izz="0.00281696"/>
    </inertial>
    <visual>
      <origin xyz="0.141358 0.00126819 6.80296e-06" rpy="0 -1.5708 0"/>
      <geometry>
        <mesh filename="package://myactuator_arm/description/meshes/rotor_x6_p20_60.stl"/>
      </geometry>
      <material name="orange">
        <color rgba="0.65098 0.486275 0.0196078 1"/>
      </material>
    </visual>
    <collision>
      <origin xyz="0.141358 0.00126819 6.80296e-06" rpy="0 -1.5708 0"/>
      <geometry>
        <mesh filename="package://myactuator_arm/description/meshes/rotor_x6_p20_60.stl"/>
      </geometry>
    </collision>
    <visual>
      <origin xyz="-0.00130076 -6.96521e-06 -0.0582746" rpy="-1.5708 -1.5708 0"/>
      <geometry>
        <mesh filename="package://myactuator_arm/description/meshes/l_shoulder.stl"/>
      </geometry>
      <material name="blue"/>
    </visual>
    <collision>
      <origin xyz="-0.00130076 -6.96521e-06 -0.0582746" rpy="-1.5708 -1.5708 0"/>
      <geometry>
        <mesh filename="package://myactuator_arm/description/meshes/l_shoulder.stl"/>
      </geometry>
    </collision>
    <visual>
      <origin xyz="-0.0385 0 -0.078" rpy="0 1.5708 0"/>
      <geometry>
        <mesh filename="package://myactuator_arm/description/meshes/stator_x6_p20_60.stl"/>
      </geometry>
      <material name="gold"/>
    </visual>
    <collision>
      <origin xyz="-0.0385 0 -0.078" rpy="0 1.5708 0"/>
      <geometry>
        <mesh filename="package://myactuator_arm/description/meshes/stator_x6_p20_60.stl"/>
      </geometry>
    </collision>
  </link>

  <!-- Link 2: Upper arm (roll rotation) -->
  <link name="upper_arm_link">
    <inertial>
      <origin xyz="-0.112126 -2.19492e-08 0.0230405" rpy="0 0 0"/>
      <mass value="1.54329"/>
      <inertia ixx="0.00133766" ixy="6.04381e-10" ixz="0.000537695" iyy="0.00254134" iyz="7.1395e-08" izz="0.00234132"/>
    </inertial>
    <visual>
      <origin xyz="-0.0385 0 -0.078" rpy="0 1.5708 0"/>
      <geometry>
        <mesh filename="package://myactuator_arm/description/meshes/rotor_x6_p20_60.stl"/>
      </geometry>
      <material name="orange"/>
    </visual>
    <collision>
      <origin xyz="-0.0385 0 -0.078" rpy="0 1.5708 0"/>
      <geometry>
        <mesh filename="package://myactuator_arm/description/meshes/rotor_x6_p20_60.stl"/>
      </geometry>
    </collision>
    <visual>
      <origin xyz="-0.0912885 -6.25469e-08 0.00867029" rpy="-1.5708 0 -1.5708"/>
      <geometry>
        <mesh filename="package://myactuator_arm/description/meshes/l_upper_arm.stl"/>
      </geometry>
      <material name="blue"/>
    </visual>
    <collision>
      <origin xyz="-0.0912885 -6.25469e-08 0.00867029" rpy="-1.5708 0 -1.5708"/>
      <geometry>
        <mesh filename="package://myactuator_arm/description/meshes/l_upper_arm.stl"/>
      </geometry>
    </collision>
    <visual>
      <origin xyz="-0.091 0 0.029" rpy="1.5708 0 -1.5708"/>
      <geometry>
        <mesh filename="package://myactuator_arm/description/meshes/stator_x4_p36_36.stl"/>
      </geometry>
      <material name="purple">
        <color rgba="0.764706 0.545098 0.803922 1"/>
      </material>
    </visual>
    <collision>
      <origin xyz="-0.091 0 0.029" rpy="1.5708 0 -1.5708"/>
      <geometry>
        <mesh filename="package://myactuator_arm/description/meshes/stator_x4_p36_36.stl"/>
      </geometry>
    </collision>
  </link>

  <!-- Link 3: Elbow (yaw rotation) -->
  <link name="elbow_link">
    <inertial>
      <origin xyz="0.0103789 1.30908e-06 -0.0814648" rpy="0 0 0"/>
      <mass value="2.87437"/>
      <inertia ixx="0.00300002" ixy="3.78723e-08" ixz="7.45868e-05" iyy="0.00280783" iyz="1.59723e-08" izz="0.00247115"/>
    </inertial>
    <visual>
      <origin xyz="-0.091 0 0.029" rpy="1.5708 0 -1.5708"/>
      <geometry>
        <mesh filename="package://myactuator_arm/description/meshes/rotor_x4_p36_36.stl"/>
      </geometry>
      <material name="dark_purple">
        <color rgba="0.380392 0.0470588 0.435294 1"/>
      </material>
    </visual>
    <collision>
      <origin xyz="-0.091 0 0.029" rpy="1.5708 0 -1.5708"/>
      <geometry>
        <mesh filename="package://myactuator_arm/description/meshes/rotor_x4_p36_36.stl"/>
      </geometry>
    </collision>
    <visual>
      <origin xyz="-0.000331628 1.15447e-05 -0.0692953" rpy="0 0 0"/>
      <geometry>
        <mesh filename="package://myactuator_arm/description/meshes/l_elbow.stl"/>
      </geometry>
      <material name="blue"/>
    </visual>
    <collision>
      <origin xyz="-0.000331628 1.15447e-05 -0.0692953" rpy="0 0 0"/>
      <geometry>
        <mesh filename="package://myactuator_arm/description/meshes/l_elbow.stl"/>
      </geometry>
    </collision>
    <visual>
      <origin xyz="0.0445 0 -0.083" rpy="0 -1.5708 0"/>
      <geometry>
        <mesh filename="package://myactuator_arm/description/meshes/stator_x6_p20_60.stl"/>
      </geometry>
      <material name="gold"/>
    </visual>
    <collision>
      <origin xyz="0.0445 0 -0.083" rpy="0 -1.5708 0"/>
      <geometry>
        <mesh filename="package://myactuator_arm/description/meshes/stator_x6_p20_60.stl"/>
      </geometry>
    </collision>
  </link>

  <!-- Link 4: Upper forearm (pitch rotation) -->
  <link name="upper_forearm_link">
    <inertial>
      <origin xyz="0.00126439 -0.111037 0.0195224" rpy="0 0 0"/>
      <mass value="1.44829"/>
      <inertia ixx="0.00214741" ixy="-9.87926e-07" ixz="-6.26246e-06" iyy="0.000998643" iyz="0.000395055" izz="0.00190798"/>
    </inertial>
    <visual>
      <origin xyz="0.0445 0 -0.083" rpy="0 -1.5708 0"/>
      <geometry>
        <mesh filename="package://myactuator_arm/description/meshes/rotor_x6_p20_60.stl"/>
      </geometry>
      <material name="orange"/>
    </visual>
    <collision>
      <origin xyz="0.0445 0 -0.083" rpy="0 -1.5708 0"/>
      <geometry>
        <mesh filename="package://myactuator_arm/description/meshes/rotor_x6_p20_60.stl"/>
      </geometry>
    </collision>
    <visual>
      <origin xyz="0.0046701 -0.0842108 0.00848547" rpy="-1.5708 -1.5708 0"/>
      <geometry>
        <mesh filename="package://myactuator_arm/description/meshes/l_upper_forearm.stl"/>
      </geometry>
      <material name="blue"/>
    </visual>
    <collision>
      <origin xyz="0.0046701 -0.0842108 0.00848547" rpy="-1.5708 -1.5708 0"/>
      <geometry>
        <mesh filename="package://myactuator_arm/description/meshes/l_upper_forearm.stl"/>
      </geometry>
    </collision>
    <visual>
      <origin xyz="0 -0.09 0.023" rpy="1.5708 -1.5708 0"/>
      <geometry>
        <mesh filename="package://myactuator_arm/description/meshes/stator_x4_p36_36.stl"/>
      </geometry>
      <material name="purple"/>
    </visual>
    <collision>
      <origin xyz="0 -0.09 0.023" rpy="1.5708 -1.5708 0"/>
      <geometry>
        <mesh filename="package://myactuator_arm/description/meshes/stator_x4_p36_36.stl"/>
      </geometry>
    </collision>
  </link>

  <!-- Link 5: Lower forearm and hand (yaw rotation) -->
  <link name="end_effector_link">
    <inertial>
      <origin xyz="-2.78156e-05 0.00215422 -0.147028" rpy="0 0 0"/>
      <mass value="0.558"/>
      <inertia ixx="0.00382826" ixy="-3.16312e-08" ixz="2.02243e-07" iyy="0.00375463" iyz="-2.11667e-05" izz="0.000416359"/>
    </inertial>
    <visual>
      <origin xyz="0 -0.09 0.023" rpy="1.5708 -1.5708 0"/>
      <geometry>
        <mesh filename="package://myactuator_arm/description/meshes/rotor_x4_p36_36.stl"/>
      </geometry>
      <material name="dark_purple"/>
    </visual>
    <collision>
      <origin xyz="0 -0.09 0.023" rpy="1.5708 -1.5708 0"/>
      <geometry>
        <mesh filename="package://myactuator_arm/description/meshes/rotor_x4_p36_36.stl"/>
      </geometry>
    </collision>
    <visual>
      <origin xyz="-6.05561e-05 0.00294052 -0.075703" rpy="0 0 0"/>
      <geometry>
        <mesh filename="package://myactuator_arm/description/meshes/l_lower_forearm.stl"/>
      </geometry>
      <material name="blue"/>
    </visual>
    <collision>
      <origin xyz="-6.05561e-05 0.00294052 -0.075703" rpy="0 0 0"/>
      <geometry>
        <mesh filename="package://myactuator_arm/description/meshes/l_lower_forearm.stl"/>
      </geometry>
    </collision>
    <visual>
      <origin xyz="0 0 -0.252" rpy="0 0 1.5708"/>
      <geometry>
        <mesh filename="package://myactuator_arm/description/meshes/hand.stl"/>
      </geometry>
      <material name="white">
        <color rgba="1 1 1 1"/>
      </material>
    </visual>
    <collision>
      <origin xyz="0 0 -0.252" rpy="0 0 1.5708"/>
      <geometry>
        <mesh filename="package://myactuator_arm/description/meshes/hand.stl"/>
      </geometry>
    </collision>
    <!-- Gripper fingers collision (using simplified hand collision for now) -->
    <visual>
      <origin xyz="0 0 -0.252" rpy="0 0 1.5708"/>
      <geometry>
        <mesh filename="package://myactuator_arm/description/meshes/f1.stl"/>
      </geometry>
      <material name="white"/>
    </visual>
    <collision>
      <origin xyz="0 0 -0.252" rpy="0 0 1.5708"/>
      <geometry>
        <mesh filename="package://myactuator_arm/description/meshes/f1.stl"/>
      </geometry>
    </collision>
    <visual>
      <origin xyz="0 0 -0.252" rpy="0 0 1.5708"/>
      <geometry>
        <mesh filename="package://myactuator_arm/description/meshes/f2.stl"/>
      </geometry>
      <material name="white"/>
    </visual>
    <collision>
      <origin xyz="0 0 -0.252" rpy="0 0 1.5708"/>
      <geometry>
        <mesh filename="package://myactuator_arm/description/meshes/f2.stl"/>
      </geometry>
    </collision>
    <visual>
      <origin xyz="0 0 -0.252" rpy="0 0 1.5708"/>
      <geometry>
        <mesh filename="package://myactuator_arm/description/meshes/f3.stl"/>
      </geometry>
      <material name="white"/>
    </visual>
    <collision>
      <origin xyz="0 0 -0.252" rpy="0 0 1.5708"/>
      <geometry>
        <mesh filename="package://myactuator_arm/description/meshes/f3.stl"/>
      </geometry>
    </collision>
    <visual>
      <origin xyz="0 0 -0.252" rpy="0 0 1.5708"/>
      <geometry>
        <mesh filename="package://myactuator_arm/description/meshes/f4.stl"/>
      </geometry>
      <material name="white"/>
    </visual>
    <collision>
      <origin xyz="0 0 -0.252" rpy="0 0 1.5708"/>
      <geometry>
        <mesh filename="package://myactuator_arm/description/meshes/f4.stl"/>
      </geometry>
    </collision>
    <visual>
      <origin xyz="0 0 -0.252" rpy="0 0 1.5708"/>
      <geometry>
        <mesh filename="package://myactuator_arm/description/meshes/f5.stl"/>
      </geometry>
      <material name="white"/>
    </visual>
    <collision>
      <origin xyz="0 0 -0.252" rpy="0 0 1.5708"/>
      <geometry>
        <mesh filename="package://myactuator_arm/description/meshes/f5.stl"/>
      </geometry>
    </collision>
  </link>

  <!-- Joint 1: Shoulder pitch -->
  <joint name="joint1" type="revolute">
    <origin xyz="0.0498579 0.00126819 6.80296e-06" rpy="1.5708 0 1.5708"/>
    <parent link="base_link"/>
    <child link="shoulder_link"/>
    <axis xyz="0 0 1"/>
    <limit lower="-1.5708" upper="3.14159" velocity="16.0" effort="20.0"/>
  </joint>

  <!-- Joint 2: Shoulder roll -->
  <joint name="joint2" type="revolute">
    <origin xyz="0.029 0 -0.078" rpy="-1.5708 0 1.5708"/>
    <parent link="shoulder_link"/>
    <child link="upper_arm_link"/>
    <axis xyz="0 0 1"/>
    <limit lower="-3.14159" upper="0.112" velocity="16.0" effort="20.0"/>
  </joint>

  <!-- Joint 3: Shoulder yaw -->
  <joint name="joint3" type="revolute">
    <origin xyz="-0.157 0 0.029" rpy="-1.5708 0.000395729 -1.5708"/>
    <parent link="upper_arm_link"/>
    <child link="elbow_link"/>
    <axis xyz="0 0 1"/>
    <limit lower="-1.57119" upper="1.5704" velocity="16.0" effort="20.0"/>
  </joint>

  <!-- Joint 4: Elbow pitch -->
  <joint name="joint4" type="revolute">
    <origin xyz="-0.023 0 -0.083" rpy="1.5708 -7.42674e-05 1.5708"/>
    <parent link="elbow_link"/>
    <child link="upper_forearm_link"/>
    <axis xyz="0 0 1"/>
    <limit lower="-1.57087" upper="1.57072" velocity="16.0" effort="10.0"/>
  </joint>

  <!-- Joint 5: Elbow yaw -->
  <joint name="joint5" type="revolute">
    <origin xyz="0 -0.151 0.023" rpy="-1.5708 -1.5708 0"/>
    <parent link="upper_forearm_link"/>
    <child link="end_effector_link"/>
    <axis xyz="0 0 1"/>
    <limit lower="-1.5708" upper="1.5708" velocity="16.0" effort="10.0"/>
  </joint>
</robot>
