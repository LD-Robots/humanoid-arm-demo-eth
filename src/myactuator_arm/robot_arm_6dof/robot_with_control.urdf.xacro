<?xml version="1.0"?>
<robot xmlns:xacro="http://www.ros.org/wiki/xacro" name="robot_arm_6dof">

  <!-- Load initial positions from YAML file -->
  <xacro:arg name="initial_positions_file" default="$(find myactuator_arm_moveit_config)/config/initial_positions.yaml" />
  <xacro:property name="initial_positions" value="${xacro.load_yaml('$(arg initial_positions_file)')['initial_positions']}"/>

  <!-- Load the base URDF and process it to fix mesh paths -->
  <xacro:property name="package_path" value="package://myactuator_arm/robot_arm_6dof" />

  <!-- Include the original URDF structure -->
  <!-- We'll manually define the links and joints with fixed mesh paths -->

  <!-- Link table -->
  <link name="table">
    <inertial>
      <origin xyz="0.12034 0.00123257 -0.131533" rpy="0 0 0"/>
      <mass value="12.8024"/>
      <inertia ixx="0.726842" ixy="-8.82389e-05" ixz="0.080114" iyy="0.717447" iyz="8.76443e-05" izz="0.70335"/>
    </inertial>
    <visual>
      <origin xyz="-0.0767119 -0.0215341 0.0674325" rpy="2.33841e-15 -4.39001e-28 -1.78776e-28"/>
      <geometry>
        <mesh filename="package://myactuator_arm/robot_arm_6dof/assets/torso_limiter.stl"/>
      </geometry>
      <material name="torso_limiter_material">
        <color rgba="1 0.756863 0.054902 1"/>
      </material>
    </visual>
    <collision>
      <origin xyz="-0.0767119 -0.0215341 0.0674325" rpy="2.33841e-15 -4.39001e-28 -1.78776e-28"/>
      <geometry>
        <mesh filename="package://myactuator_arm/robot_arm_6dof/assets/torso_limiter.stl"/>
      </geometry>
    </collision>
    <visual>
      <origin xyz="-0.0631421 0.00126819 0.000179533" rpy="2.84025e-16 -2.33841e-15 1.5708"/>
      <geometry>
        <mesh filename="package://myactuator_arm/robot_arm_6dof/assets/menghina_x6.stl"/>
      </geometry>
      <material name="menghina_x6_material">
        <color rgba="0.32549 0.529412 0.752941 1"/>
      </material>
    </visual>
    <collision>
      <origin xyz="-0.0631421 0.00126819 0.000179533" rpy="2.84025e-16 -2.33841e-15 1.5708"/>
      <geometry>
        <mesh filename="package://myactuator_arm/robot_arm_6dof/assets/menghina_x6.stl"/>
      </geometry>
    </collision>
    <visual>
      <origin xyz="-0.0331421 0.00126819 0.000179533" rpy="3.14159 -2.39392e-15 1.5708"/>
      <geometry>
        <mesh filename="package://myactuator_arm/robot_arm_6dof/assets/spacer_x6_menghina_m4x60.stl"/>
      </geometry>
      <material name="spacer_x6_menghina_m4x60_material">
        <color rgba="0.596078 0.121569 0.67451 1"/>
      </material>
    </visual>
    <collision>
      <origin xyz="-0.0331421 0.00126819 0.000179533" rpy="3.14159 -2.39392e-15 1.5708"/>
      <geometry>
        <mesh filename="package://myactuator_arm/robot_arm_6dof/assets/spacer_x6_menghina_m4x60.stl"/>
      </geometry>
    </collision>
    <visual>
      <origin xyz="0.171858 0.00126819 -0.0923205" rpy="-3.14159 2.84025e-16 -1.25251e-16"/>
      <geometry>
        <mesh filename="package://myactuator_arm/robot_arm_6dof/assets/table.stl"/>
      </geometry>
      <material name="table_material">
        <color rgba="0.615686 0.811765 0.929412 1"/>
      </material>
    </visual>
    <collision>
      <origin xyz="0.171858 0.00126819 -0.0923205" rpy="-3.14159 2.84025e-16 -1.25251e-16"/>
      <geometry>
        <mesh filename="package://myactuator_arm/robot_arm_6dof/assets/table.stl"/>
      </geometry>
    </collision>
    <visual>
      <origin xyz="-0.00864214 0.00126819 0.000179533" rpy="-1.25251e-16 -1.5708 0"/>
      <geometry>
        <mesh filename="package://myactuator_arm/robot_arm_6dof/assets/rotor_x6_p20_60.stl"/>
      </geometry>
      <material name="rotor_x6_p20_60_material">
        <color rgba="0.65098 0.486275 0.0196078 1"/>
      </material>
    </visual>
    <collision>
      <origin xyz="-0.00864214 0.00126819 0.000179533" rpy="-1.25251e-16 -1.5708 0"/>
      <geometry>
        <mesh filename="package://myactuator_arm/robot_arm_6dof/assets/rotor_x6_p20_60.stl"/>
      </geometry>
    </collision>
    <visual>
      <origin xyz="-0.00864214 0.00126819 0.000179533" rpy="-1.25251e-16 -1.5708 0"/>
      <geometry>
        <mesh filename="package://myactuator_arm/robot_arm_6dof/assets/stator_x6_p20_60.stl"/>
      </geometry>
      <material name="stator_x6_p20_60_material">
        <color rgba="0.960784 0.835294 0.470588 1"/>
      </material>
    </visual>
    <collision>
      <origin xyz="-0.00864214 0.00126819 0.000179533" rpy="-1.25251e-16 -1.5708 0"/>
      <geometry>
        <mesh filename="package://myactuator_arm/robot_arm_6dof/assets/stator_x6_p20_60.stl"/>
      </geometry>
    </collision>
  </link>

  <!-- Link urdf_l_shoulder_assembly -->
  <link name="urdf_l_shoulder_assembly">
    <inertial>
      <origin xyz="-0.00526655 -5.01444e-05 -0.0747997" rpy="0 0 0"/>
      <mass value="2.99837"/>
      <inertia ixx="0.00360636" ixy="-4.79289e-06" ixz="5.35805e-05" iyy="0.00316519" iyz="1.005e-05" izz="0.0029116"/>
    </inertial>
    <visual>
      <origin xyz="-0.0305797 -0.00737046 -0.0183842" rpy="-1.5708 -1.5708 0"/>
      <geometry>
        <mesh filename="package://myactuator_arm/robot_arm_6dof/assets/shoulder_limiter.stl"/>
      </geometry>
      <material name="shoulder_limiter_material">
        <color rgba="1 0.756863 0.054902 1"/>
      </material>
    </visual>
    <collision>
      <origin xyz="-0.0305797 -0.00737046 -0.0183842" rpy="-1.5708 -1.5708 0"/>
      <geometry>
        <mesh filename="package://myactuator_arm/robot_arm_6dof/assets/shoulder_limiter.stl"/>
      </geometry>
    </collision>
    <visual>
      <origin xyz="-0.00130076 -6.96521e-06 -0.0582746" rpy="-1.5708 -1.5708 0"/>
      <geometry>
        <mesh filename="package://myactuator_arm/robot_arm_6dof/assets/l_shoulder.stl"/>
      </geometry>
      <material name="l_shoulder_material">
        <color rgba="0.615686 0.811765 0.929412 1"/>
      </material>
    </visual>
    <collision>
      <origin xyz="-0.00130076 -6.96521e-06 -0.0582746" rpy="-1.5708 -1.5708 0"/>
      <geometry>
        <mesh filename="package://myactuator_arm/robot_arm_6dof/assets/l_shoulder.stl"/>
      </geometry>
    </collision>
    <visual>
      <origin xyz="-0.0385 1.29887e-16 -0.078" rpy="-3.14159 -1.5708 0"/>
      <geometry>
        <mesh filename="package://myactuator_arm/robot_arm_6dof/assets/rotor_x6_p20_60.stl"/>
      </geometry>
      <material name="rotor_x6_p20_60_2_material">
        <color rgba="0.65098 0.486275 0.0196078 1"/>
      </material>
    </visual>
    <collision>
      <origin xyz="-0.0385 1.29887e-16 -0.078" rpy="-3.14159 -1.5708 0"/>
      <geometry>
        <mesh filename="package://myactuator_arm/robot_arm_6dof/assets/rotor_x6_p20_60.stl"/>
      </geometry>
    </collision>
    <visual>
      <origin xyz="-0.0385 1.28153e-16 -0.078" rpy="-3.14159 -1.5708 0"/>
      <geometry>
        <mesh filename="package://myactuator_arm/robot_arm_6dof/assets/stator_x6_p20_60.stl"/>
      </geometry>
      <material name="stator_x6_p20_60_2_material">
        <color rgba="0.960784 0.835294 0.470588 1"/>
      </material>
    </visual>
    <collision>
      <origin xyz="-0.0385 1.28153e-16 -0.078" rpy="-3.14159 -1.5708 0"/>
      <geometry>
        <mesh filename="package://myactuator_arm/robot_arm_6dof/assets/stator_x6_p20_60.stl"/>
      </geometry>
    </collision>
  </link>

  <!-- Link urdf_l_upper_arm_assembly -->
  <link name="urdf_l_upper_arm_assembly">
    <inertial>
      <origin xyz="0.000527863 0.112716 -0.0353918" rpy="0 0 0"/>
      <mass value="1.56329"/>
      <inertia ixx="0.00261957" ixy="-3.7804e-05" ixz="1.27536e-05" iyy="0.00141519" iyz="0.000562166" izz="0.00242582"/>
    </inertial>
    <visual>
      <origin xyz="0.0412588 0.158216 -0.0625065" rpy="1.5708 1.82479e-46 3.02919e-16"/>
      <geometry>
        <mesh filename="package://myactuator_arm/robot_arm_6dof/assets/arm_limiter.stl"/>
      </geometry>
      <material name="arm_limiter_material">
        <color rgba="1 0.756863 0.054902 1"/>
      </material>
    </visual>
    <collision>
      <origin xyz="0.0412588 0.158216 -0.0625065" rpy="1.5708 1.82479e-46 3.02919e-16"/>
      <geometry>
        <mesh filename="package://myactuator_arm/robot_arm_6dof/assets/arm_limiter.stl"/>
      </geometry>
    </collision>
    <visual>
      <origin xyz="6.25469e-08 0.0912885 -0.0206703" rpy="1.5708 1.46425e-46 -9.06465e-45"/>
      <geometry>
        <mesh filename="package://myactuator_arm/robot_arm_6dof/assets/l_upper_arm.stl"/>
      </geometry>
      <material name="l_upper_arm_material">
        <color rgba="0.615686 0.811765 0.929412 1"/>
      </material>
    </visual>
    <collision>
      <origin xyz="6.25469e-08 0.0912885 -0.0206703" rpy="1.5708 1.46425e-46 -9.06465e-45"/>
      <geometry>
        <mesh filename="package://myactuator_arm/robot_arm_6dof/assets/l_upper_arm.stl"/>
      </geometry>
    </collision>
    <visual>
      <origin xyz="1.66533e-16 0.091 -0.041" rpy="-1.5708 2.13104e-30 3.46945e-17"/>
      <geometry>
        <mesh filename="package://myactuator_arm/robot_arm_6dof/assets/rotor_x4_p36_36.stl"/>
      </geometry>
      <material name="rotor_x4_p36_36_material">
        <color rgba="0.380392 0.0470588 0.435294 1"/>
      </material>
    </visual>
    <collision>
      <origin xyz="1.66533e-16 0.091 -0.041" rpy="-1.5708 2.13104e-30 3.46945e-17"/>
      <geometry>
        <mesh filename="package://myactuator_arm/robot_arm_6dof/assets/rotor_x4_p36_36.stl"/>
      </geometry>
    </collision>
    <visual>
      <origin xyz="1.66533e-16 0.091 -0.041" rpy="-1.5708 4.10319e-30 3.46945e-17"/>
      <geometry>
        <mesh filename="package://myactuator_arm/robot_arm_6dof/assets/stator_x4_p36_36.stl"/>
      </geometry>
      <material name="stator_x4_p36_36_material">
        <color rgba="0.764706 0.545098 0.803922 1"/>
      </material>
    </visual>
    <collision>
      <origin xyz="1.66533e-16 0.091 -0.041" rpy="-1.5708 4.10319e-30 3.46945e-17"/>
      <geometry>
        <mesh filename="package://myactuator_arm/robot_arm_6dof/assets/stator_x4_p36_36.stl"/>
      </geometry>
    </collision>
  </link>

  <!-- Link urdf_l_elbow_assembly -->
  <link name="urdf_l_elbow_assembly">
    <inertial>
      <origin xyz="0.0100547 -0.000241015 -0.0630889" rpy="0 0 0"/>
      <mass value="2.89437"/>
      <inertia ixx="0.00309417" ixy="-2.35227e-05" ixz="0.000125711" iyy="0.00292161" iyz="3.72513e-05" izz="0.00256028"/>
    </inertial>
    <visual>
      <origin xyz="-0.0365396 -0.0350673 -0.00907087" rpy="1.0849e-15 -1.78207e-15 3.17455e-19"/>
      <geometry>
        <mesh filename="package://myactuator_arm/robot_arm_6dof/assets/elbow_limiter.stl"/>
      </geometry>
      <material name="elbow_limiter_material">
        <color rgba="1 0.756863 0.054902 1"/>
      </material>
    </visual>
    <collision>
      <origin xyz="-0.0365396 -0.0350673 -0.00907087" rpy="1.0849e-15 -1.78207e-15 3.17455e-19"/>
      <geometry>
        <mesh filename="package://myactuator_arm/robot_arm_6dof/assets/elbow_limiter.stl"/>
      </geometry>
    </collision>
    <visual>
      <origin xyz="-0.000331628 1.15447e-05 -0.0512953" rpy="7.48885e-32 -1.99821e-31 -7.80589e-21"/>
      <geometry>
        <mesh filename="package://myactuator_arm/robot_arm_6dof/assets/l_elbow.stl"/>
      </geometry>
      <material name="l_elbow_material">
        <color rgba="0.615686 0.811765 0.929412 1"/>
      </material>
    </visual>
    <collision>
      <origin xyz="-0.000331628 1.15447e-05 -0.0512953" rpy="7.48885e-32 -1.99821e-31 -7.80589e-21"/>
      <geometry>
        <mesh filename="package://myactuator_arm/robot_arm_6dof/assets/l_elbow.stl"/>
      </geometry>
    </collision>
    <visual>
      <origin xyz="0.0445 -3.27429e-17 -0.065" rpy="-3.14159 1.5708 0"/>
      <geometry>
        <mesh filename="package://myactuator_arm/robot_arm_6dof/assets/rotor_x6_p20_60.stl"/>
      </geometry>
      <material name="rotor_x6_p20_60_3_material">
        <color rgba="0.65098 0.486275 0.0196078 1"/>
      </material>
    </visual>
    <collision>
      <origin xyz="0.0445 -3.27429e-17 -0.065" rpy="-3.14159 1.5708 0"/>
      <geometry>
        <mesh filename="package://myactuator_arm/robot_arm_6dof/assets/rotor_x6_p20_60.stl"/>
      </geometry>
    </collision>
    <visual>
      <origin xyz="0.0445 -3.62124e-17 -0.065" rpy="-3.14159 1.5708 0"/>
      <geometry>
        <mesh filename="package://myactuator_arm/robot_arm_6dof/assets/stator_x6_p20_60.stl"/>
      </geometry>
      <material name="stator_x6_p20_60_3_material">
        <color rgba="0.960784 0.835294 0.470588 1"/>
      </material>
    </visual>
    <collision>
      <origin xyz="0.0445 -3.62124e-17 -0.065" rpy="-3.14159 1.5708 0"/>
      <geometry>
        <mesh filename="package://myactuator_arm/robot_arm_6dof/assets/stator_x6_p20_60.stl"/>
      </geometry>
    </collision>
  </link>

  <!-- Link urdf_l_upper_forearm_assembly -->
  <link name="urdf_l_upper_forearm_assembly">
    <inertial>
      <origin xyz="0.000989597 0.111651 -0.0320435" rpy="0 0 0"/>
      <mass value="1.46829"/>
      <inertia ixx="0.002223" ixy="1.86954e-05" ixz="-1.84274e-06" iyy="0.00105653" iyz="0.000429196" izz="0.00197143"/>
    </inertial>
    <visual>
      <origin xyz="-0.0189092 0.156122 -0.0697779" rpy="1.57072 1.5708 0"/>
      <geometry>
        <mesh filename="package://myactuator_arm/robot_arm_6dof/assets/forearm_limiter.stl"/>
      </geometry>
      <material name="forearm_limiter_material">
        <color rgba="1 0.756863 0.054902 1"/>
      </material>
    </visual>
    <collision>
      <origin xyz="-0.0189092 0.156122 -0.0697779" rpy="1.57072 1.5708 0"/>
      <geometry>
        <mesh filename="package://myactuator_arm/robot_arm_6dof/assets/forearm_limiter.stl"/>
      </geometry>
    </collision>
    <visual>
      <origin xyz="0.0046701 0.0842108 -0.0204855" rpy="1.5708 1.5708 0"/>
      <geometry>
        <mesh filename="package://myactuator_arm/robot_arm_6dof/assets/l_upper_forearm.stl"/>
      </geometry>
      <material name="l_upper_forearm_material">
        <color rgba="0.615686 0.811765 0.929412 1"/>
      </material>
    </visual>
    <collision>
      <origin xyz="0.0046701 0.0842108 -0.0204855" rpy="1.5708 1.5708 0"/>
      <geometry>
        <mesh filename="package://myactuator_arm/robot_arm_6dof/assets/l_upper_forearm.stl"/>
      </geometry>
    </collision>
    <visual>
      <origin xyz="-1.19262e-17 0.09 -0.035" rpy="-1.5708 1.5708 0"/>
      <geometry>
        <mesh filename="package://myactuator_arm/robot_arm_6dof/assets/rotor_x4_p36_36.stl"/>
      </geometry>
      <material name="rotor_x4_p36_36_2_material">
        <color rgba="0.380392 0.0470588 0.435294 1"/>
      </material>
    </visual>
    <collision>
      <origin xyz="-1.19262e-17 0.09 -0.035" rpy="-1.5708 1.5708 0"/>
      <geometry>
        <mesh filename="package://myactuator_arm/robot_arm_6dof/assets/rotor_x4_p36_36.stl"/>
      </geometry>
    </collision>
    <visual>
      <origin xyz="-1.19262e-17 0.09 -0.035" rpy="-1.5708 1.5708 0"/>
      <geometry>
        <mesh filename="package://myactuator_arm/robot_arm_6dof/assets/stator_x4_p36_36.stl"/>
      </geometry>
      <material name="stator_x4_p36_36_2_material">
        <color rgba="0.764706 0.545098 0.803922 1"/>
      </material>
    </visual>
    <collision>
      <origin xyz="-1.19262e-17 0.09 -0.035" rpy="-1.5708 1.5708 0"/>
      <geometry>
        <mesh filename="package://myactuator_arm/robot_arm_6dof/assets/stator_x4_p36_36.stl"/>
      </geometry>
    </collision>
  </link>

  <!-- Link urdf_l_lower_forearm_assembly -->
  <link name="urdf_l_lower_forearm_assembly">
    <inertial>
      <origin xyz="-0.000489596 -0.0073574 -0.0580014" rpy="0 0 0"/>
      <mass value="1.29529"/>
      <inertia ixx="0.000900028" ixy="-5.08249e-06" ixz="2.89909e-05" iyy="0.000825354" iyz="-2.4554e-05" izz="0.000743839"/>
    </inertial>
    <visual>
      <origin xyz="-0.0317086 -0.0248862 -0.0127911" rpy="-7.42674e-05 -2.93897e-08 1.74127e-18"/>
      <geometry>
        <mesh filename="package://myactuator_arm/robot_arm_6dof/assets/hand_limiter.stl"/>
      </geometry>
      <material name="hand_limiter_material">
        <color rgba="1 0.756863 0.054902 1"/>
      </material>
    </visual>
    <collision>
      <origin xyz="-0.0317086 -0.0248862 -0.0127911" rpy="-7.42674e-05 -2.93897e-08 1.74127e-18"/>
      <geometry>
        <mesh filename="package://myactuator_arm/robot_arm_6dof/assets/hand_limiter.stl"/>
      </geometry>
    </collision>
    <visual>
      <origin xyz="-3.86484e-08 0.00195591 -0.0398386" rpy="4.58371e-32 -1.4703e-32 6.74005e-21"/>
      <geometry>
        <mesh filename="package://myactuator_arm/robot_arm_6dof/assets/l_lower_forearm.stl"/>
      </geometry>
      <material name="l_lower_forearm_material">
        <color rgba="0.537255 0.854902 0.827451 1"/>
      </material>
    </visual>
    <collision>
      <origin xyz="-3.86484e-08 0.00195591 -0.0398386" rpy="4.58371e-32 -1.4703e-32 6.74005e-21"/>
      <geometry>
        <mesh filename="package://myactuator_arm/robot_arm_6dof/assets/l_lower_forearm.stl"/>
      </geometry>
    </collision>
    <visual>
      <origin xyz="2.77556e-17 -0.038 -0.0615" rpy="1.5708 -2.24982e-27 3.14159"/>
      <geometry>
        <mesh filename="package://myactuator_arm/robot_arm_6dof/assets/rotor_x4_p36_36.stl"/>
      </geometry>
      <material name="rotor_x4_p36_36_3_material">
        <color rgba="0.380392 0.0470588 0.435294 1"/>
      </material>
    </visual>
    <collision>
      <origin xyz="2.77556e-17 -0.038 -0.0615" rpy="1.5708 -2.24982e-27 3.14159"/>
      <geometry>
        <mesh filename="package://myactuator_arm/robot_arm_6dof/assets/rotor_x4_p36_36.stl"/>
      </geometry>
    </collision>
    <visual>
      <origin xyz="2.77556e-17 -0.038 -0.0615" rpy="1.5708 -2.24982e-27 3.14159"/>
      <geometry>
        <mesh filename="package://myactuator_arm/robot_arm_6dof/assets/stator_x4_p36_36.stl"/>
      </geometry>
      <material name="stator_x4_p36_36_3_material">
        <color rgba="0.764706 0.545098 0.803922 1"/>
      </material>
    </visual>
    <collision>
      <origin xyz="2.77556e-17 -0.038 -0.0615" rpy="1.5708 -2.24982e-27 3.14159"/>
      <geometry>
        <mesh filename="package://myactuator_arm/robot_arm_6dof/assets/stator_x4_p36_36.stl"/>
      </geometry>
    </collision>
  </link>

  <!-- Link urdf_l_wrist_assembly -->
  <link name="urdf_l_wrist_assembly">
    <inertial>
      <origin xyz="-5.18072e-05 0.112389 -0.0262499" rpy="0 0 0"/>
      <mass value="0.398"/>
      <inertia ixx="0.00159798" ixy="-1.08516e-06" ixz="-7.58273e-08" iyy="0.000261878" iyz="7.53453e-05" izz="0.00147321"/>
    </inertial>
    <visual>
      <origin xyz="-5.55112e-17 0.1785 -0.03" rpy="1.5708 -1.5708 0"/>
      <geometry>
        <mesh filename="package://myactuator_arm/robot_arm_6dof/assets/f3.stl"/>
      </geometry>
      <material name="f3_material">
        <color rgba="1 1 1 1"/>
      </material>
    </visual>
    <collision>
      <origin xyz="-5.55112e-17 0.1785 -0.03" rpy="1.5708 -1.5708 0"/>
      <geometry>
        <mesh filename="package://myactuator_arm/robot_arm_6dof/assets/f3.stl"/>
      </geometry>
    </collision>
    <visual>
      <origin xyz="-5.55112e-17 0.1785 -0.03" rpy="1.5708 -1.5708 0"/>
      <geometry>
        <mesh filename="package://myactuator_arm/robot_arm_6dof/assets/f4.stl"/>
      </geometry>
      <material name="f4_material">
        <color rgba="1 1 1 1"/>
      </material>
    </visual>
    <collision>
      <origin xyz="-5.55112e-17 0.1785 -0.03" rpy="1.5708 -1.5708 0"/>
      <geometry>
        <mesh filename="package://myactuator_arm/robot_arm_6dof/assets/f4.stl"/>
      </geometry>
    </collision>
    <visual>
      <origin xyz="-5.55112e-17 0.1785 -0.03" rpy="1.5708 -1.5708 0"/>
      <geometry>
        <mesh filename="package://myactuator_arm/robot_arm_6dof/assets/f1.stl"/>
      </geometry>
      <material name="f1_material">
        <color rgba="1 1 1 1"/>
      </material>
    </visual>
    <collision>
      <origin xyz="-5.55112e-17 0.1785 -0.03" rpy="1.5708 -1.5708 0"/>
      <geometry>
        <mesh filename="package://myactuator_arm/robot_arm_6dof/assets/f1.stl"/>
      </geometry>
    </collision>
    <visual>
      <origin xyz="-5.55112e-17 0.1785 -0.03" rpy="1.5708 -1.5708 0"/>
      <geometry>
        <mesh filename="package://myactuator_arm/robot_arm_6dof/assets/hand.stl"/>
      </geometry>
      <material name="hand_material">
        <color rgba="1 1 1 1"/>
      </material>
    </visual>
    <collision>
      <origin xyz="-5.55112e-17 0.1785 -0.03" rpy="1.5708 -1.5708 0"/>
      <geometry>
        <mesh filename="package://myactuator_arm/robot_arm_6dof/assets/hand.stl"/>
      </geometry>
    </collision>
    <visual>
      <origin xyz="-5.55112e-17 0.1785 -0.03" rpy="1.5708 -1.5708 0"/>
      <geometry>
        <mesh filename="package://myactuator_arm/robot_arm_6dof/assets/f5.stl"/>
      </geometry>
      <material name="f5_material">
        <color rgba="1 1 1 1"/>
      </material>
    </visual>
    <collision>
      <origin xyz="-5.55112e-17 0.1785 -0.03" rpy="1.5708 -1.5708 0"/>
      <geometry>
        <mesh filename="package://myactuator_arm/robot_arm_6dof/assets/f5.stl"/>
      </geometry>
    </collision>
    <visual>
      <origin xyz="-5.55112e-17 0.1785 -0.03" rpy="1.5708 -1.5708 0"/>
      <geometry>
        <mesh filename="package://myactuator_arm/robot_arm_6dof/assets/f2.stl"/>
      </geometry>
      <material name="f2_material">
        <color rgba="1 1 1 1"/>
      </material>
    </visual>
    <collision>
      <origin xyz="-5.55112e-17 0.1785 -0.03" rpy="1.5708 -1.5708 0"/>
      <geometry>
        <mesh filename="package://myactuator_arm/robot_arm_6dof/assets/f2.stl"/>
      </geometry>
    </collision>
    <visual>
      <origin xyz="-0.000210278 0.0435776 -0.0192949" rpy="1.5708 7.08031e-16 -1.4703e-32"/>
      <geometry>
        <mesh filename="package://myactuator_arm/robot_arm_6dof/assets/l_wrist.stl"/>
      </geometry>
      <material name="l_wrist_material">
        <color rgba="0.615686 0.811765 0.929412 1"/>
      </material>
    </visual>
    <collision>
      <origin xyz="-0.000210278 0.0435776 -0.0192949" rpy="1.5708 7.08031e-16 -1.4703e-32"/>
      <geometry>
        <mesh filename="package://myactuator_arm/robot_arm_6dof/assets/l_wrist.stl"/>
      </geometry>
    </collision>
  </link>

  <!-- Joint from table to urdf_l_shoulder_assembly -->
  <joint name="shoulder_pitch_joint" type="revolute">
    <origin xyz="-0.100142 0.00126819 0.000179533" rpy="1.5708 3.08087e-15 1.5708"/>
    <parent link="table"/>
    <child link="urdf_l_shoulder_assembly"/>
    <axis xyz="0 0 1"/>
    <limit effort="10" velocity="10" lower="-1.5708" upper="3.14159"/>
  </joint>

  <!-- Joint from urdf_l_shoulder_assembly to urdf_l_upper_arm_assembly -->
  <joint name="shoulder_roll_joint" type="revolute">
    <origin xyz="0.041 6.67977e-16 -0.078" rpy="-3.14159 -1.5708 0"/>
    <parent link="urdf_l_shoulder_assembly"/>
    <child link="urdf_l_upper_arm_assembly"/>
    <axis xyz="0 0 1"/>
    <limit effort="10" velocity="10" lower="0" upper="3.14159"/>
  </joint>

  <!-- Joint from urdf_l_upper_arm_assembly to urdf_l_elbow_assembly -->
  <joint name="shoulder_yaw_joint" type="revolute">
    <origin xyz="1.38778e-16 0.175 -0.041" rpy="1.5708 -0.000395729 1.96291e-15"/>
    <parent link="urdf_l_upper_arm_assembly"/>
    <child link="urdf_l_elbow_assembly"/>
    <axis xyz="0 0 1"/>
    <limit effort="10" velocity="10" lower="-1.57119" upper="1.5704"/>
  </joint>

  <!-- Joint from urdf_l_elbow_assembly to urdf_l_upper_forearm_assembly -->
  <joint name="elbow_pitch_joint" type="revolute">
    <origin xyz="-0.035 -2.40693e-17 -0.065" rpy="-1.5708 -5.60752e-15 1.5708"/>
    <parent link="urdf_l_elbow_assembly"/>
    <child link="urdf_l_upper_forearm_assembly"/>
    <axis xyz="0 0 1"/>
    <limit effort="10" velocity="10" lower="-1.5708" upper="1.5708"/>
  </joint>

  <!-- Joint from urdf_l_upper_forearm_assembly to urdf_l_lower_forearm_assembly -->
  <joint name="elbow_yaw_joint" type="revolute">
    <origin xyz="-3.25261e-18 0.163 -0.035" rpy="1.5708 1.5708 0"/>
    <parent link="urdf_l_upper_forearm_assembly"/>
    <child link="urdf_l_lower_forearm_assembly"/>
    <axis xyz="0 0 1"/>
    <limit effort="10" velocity="10" lower="-2.35619" upper="2.35619"/>
  </joint>

  <!-- Joint from urdf_l_lower_forearm_assembly to urdf_l_wrist_assembly -->
  <joint name="wrist_roll_joint" type="revolute">
    <origin xyz="2.22045e-16 0.03 -0.0615" rpy="-1.5708 -1.4703e-32 6.74005e-21"/>
    <parent link="urdf_l_lower_forearm_assembly"/>
    <child link="urdf_l_wrist_assembly"/>
    <axis xyz="0 0 1"/>
    <limit effort="10" velocity="10" lower="-1.5708" upper="1.5708"/>
  </joint>

  <!-- ROS2 Control Hardware Interface -->
  <ros2_control name="RobotSystem" type="system">
    <hardware>
      <plugin>mock_components/GenericSystem</plugin>
      <param name="calculate_dynamics">true</param>
    </hardware>

    <joint name="shoulder_pitch_joint">
      <command_interface name="position">
        <param name="min">-1.5708</param>
        <param name="max">3.14159</param>
      </command_interface>
      <state_interface name="position">
        <param name="initial_value">${initial_positions['shoulder_pitch_joint']}</param>
      </state_interface>
      <state_interface name="velocity"/>
      <state_interface name="effort"/>
    </joint>

    <joint name="shoulder_roll_joint">
      <command_interface name="position">
        <param name="min">0</param>
        <param name="max">3.14159</param>
      </command_interface>
      <state_interface name="position">
        <param name="initial_value">${initial_positions['shoulder_roll_joint']}</param>
      </state_interface>
      <state_interface name="velocity"/>
      <state_interface name="effort"/>
    </joint>

    <joint name="shoulder_yaw_joint">
      <command_interface name="position">
        <param name="min">-1.57119</param>
        <param name="max">1.5704</param>
      </command_interface>
      <state_interface name="position">
        <param name="initial_value">${initial_positions['shoulder_yaw_joint']}</param>
      </state_interface>
      <state_interface name="velocity"/>
      <state_interface name="effort"/>
    </joint>

    <joint name="elbow_pitch_joint">
      <command_interface name="position">
        <param name="min">-1.5708</param>
        <param name="max">1.5708</param>
      </command_interface>
      <state_interface name="position">
        <param name="initial_value">${initial_positions['elbow_pitch_joint']}</param>
      </state_interface>
      <state_interface name="velocity"/>
      <state_interface name="effort"/>
    </joint>

    <joint name="elbow_yaw_joint">
      <command_interface name="position">
        <param name="min">-2.35619</param>
        <param name="max">2.35619</param>
      </command_interface>
      <state_interface name="position">
        <param name="initial_value">${initial_positions['elbow_yaw_joint']}</param>
      </state_interface>
      <state_interface name="velocity"/>
      <state_interface name="effort"/>
    </joint>

    <joint name="wrist_roll_joint">
      <command_interface name="position">
        <param name="min">-1.5708</param>
        <param name="max">1.5708</param>
      </command_interface>
      <state_interface name="position">
        <param name="initial_value">${initial_positions['wrist_roll_joint']}</param>
      </state_interface>
      <state_interface name="velocity"/>
      <state_interface name="effort"/>
    </joint>
  </ros2_control>

</robot>
